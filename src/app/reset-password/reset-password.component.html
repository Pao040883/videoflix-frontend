<div class="container">
  <div class="overlay">
    <header>
      @if(!isSmallScreen) {
      <img [src]="'/images/logo_videoflix.png'" alt="" [routerLink]="['/']" routerLinkActive="router-link-active" />
      } @else {
      <img [src]="'/images/logo_videoflix_small.png'" alt="" [routerLink]="['/']" routerLinkActive="router-link-active" />
      }
      <button [routerLink]="['/log-in']" routerLinkActive="router-link-active">
        Log in
      </button>
    </header>
    <main>
      <form [formGroup]="form" (ngSubmit)="submit()" class="form-container">
        <h1>Reset password</h1>
        <p>
          Create a new password for your
          <a [routerLink]="['/']" routerLinkActive="router-link-active"
            >Videoflix</a
          >
          account.
        </p>

        @if (successMessage) {
          <div class="success-message">
            <p>✓ {{ successMessage }}</p>
            <p>Du wirst in Kürze zum Login weitergeleitet...</p>
          </div>
        }

        @if (errorMessage) {
          <div class="error-message">
            <p>✗ {{ errorMessage }}</p>
          </div>
        }

        <div class="input-container">
          <img class="img-slot-start" [src]="'/images/password.png'" alt="" />
          @if(showPassword) {
          <img
            class="img-slot-end"
            (click)="togglePasswort()"
            [src]="'/images/visibility_off.png'"
            alt=""
          />
          } @else {
          <img
            class="img-slot-end"
            (click)="togglePasswort()"
            [src]="'/images/visibility.png'"
            alt=""
          />
          }
          <input
            [type]="showPassword ? 'text' : 'password'"
            placeholder="Enter a password"
            formControlName="password"
          />
        </div>
        <div class="input-container">
          <img class="img-slot-start" [src]="'/images/password.png'" alt="" />
          @if(showConfirmPassword) {
          <img
            class="img-slot-end"
            (click)="toggleConfirmPasswort()"
            [src]="'/images/visibility_off.png'"
            alt=""
          />
          } @else {
          <img
            class="img-slot-end"
            (click)="toggleConfirmPasswort()"
            [src]="'/images/visibility.png'"
            alt=""
          />
          }
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            placeholder="Confirm password"
            formControlName="confirmPassword"
          />
          @if (form.errors?.['passwordMismatch'] && form.touched) {
          <div class="error">
            <img src="/images/warning.png" alt="" />
            <span>Passwords must match.</span>
          </div>
          } @else {
            <div class="error"></div>
          }
        </div>

        <button class="reset-button" [disabled]="form.invalid">
          Reset my password
        </button>
      </form>
      >
    </main>
    <app-footer></app-footer>
  </div>
</div>
